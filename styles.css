/* Basic reset and theme */
:root {
  --poop-hit-nudge: 0px;
  --poop-stop-offset: -20px; /* tweak this to fine-tune where the poop ends (positive = lower, negative = higher) */
  --bg: #0b1118;
  --fg: #e6edf7;
  --muted: #9eb0c7;
  --accent: #ff3b30;
  --card: #0f1622;
  --edge: #0a1018;
  --btn: #172235;
}

* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; background: var(--bg); color: var(--fg); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
a { color: var(--fg); text-decoration: none; }
h1, h2 { margin: 0 0 .5rem 0; }

.hero {
  position: relative;
  height: 110vh;
  overflow: clip;
  display: grid;
  place-items: center;
}

.city-bg { position: absolute; inset: 0; opacity: .9; pointer-events: none; }

.building {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: min(900px, 90vw);
  height: 280px;
  display: grid;
  grid-template-rows: 1fr 12px;
}

.brick {
  background: linear-gradient(180deg, #162131, #121b29);
  border: 2px solid #1e2a3d;
  border-bottom: none;
}
.edge { background: linear-gradient(180deg, #090e15, #020508); border-top: 2px solid #222f45; height: 12px; }

.character {
  position: absolute;
  bottom: 220px;
  left: calc(50% + 260px);
  transform: translateX(-50%);
  width: 180px;
  filter: drop-shadow(0 10px 20px rgba(0,0,0,.5));
  z-index: 4;
}

.poop {
  position: fixed;
  
  left: calc(50% + 248px);
  transform: translate(-50%, 0) scale(1.4);
  font-size: 64px;
  opacity: 0;
  z-index: 3;
  transition: opacity .3s ease;
}

.hero-copy { position: relative; z-index: 5; text-align: center; margin-top: 0; }
.hero-copy h1 { font-size: clamp(40px, 6vw, 80px); letter-spacing: .5px; }
.hero-copy p { color: var(--muted); margin: .5rem 0 1rem; }
.address { display: inline-block; margin-top: .75rem; background: #0f1622; padding: .5rem .75rem; border-radius: 8px; color: #a9b9cf; font-size: .9rem; }
.cta-row { display: flex; gap: .75rem; justify-content: center; }
.btn { background: var(--btn); border: 1px solid #22324b; padding: .7rem 1rem; border-radius: 12px; font-weight: 600; cursor: pointer; }
.btn:hover { border-color: #2f4567; }
.btn.outline { background: transparent; }
.btn.small { padding: .5rem .75rem; border-radius: 10px; font-size: .9rem; }

.scroll-hint { margin-top: 1rem; color: #8aa0bd; font-size: .95rem; opacity: .8; }

.info {
  position: relative;
  margin: 0 auto;
  max-width: 1100px;
  padding: 160px 16px 80px;
  display: grid;
  gap: 24px;
}

.toilet-wrap { justify-content: flex-end; 
  position: sticky;
  top: 72px;
  display: grid;
  place-items: center;
  height: 260px;
  z-index: 2;
  margin-bottom: -40px;
}
.toilet {
  width: 240px;
  max-width: 60vw;
  object-fit: contain;
  opacity: .98;
  filter: drop-shadow(0 10px 30px rgba(0,0,0,.35));
}
.splash {
  position: absolute;
  bottom: 70px;
  width: 180px;
  height: 80px;
  border-radius: 50%;
  filter: blur(10px);
  background: radial-gradient(closest-side, rgba(255,215,0,.35), rgba(0,0,0,0));
  opacity: 0;
  transition: opacity .4s ease, transform .4s ease;
}

.card { background: var(--card); border: 1px solid #1c2940; border-radius: 16px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,.25); }
.card.disclaimer { color: #8aa0bd; font-size: .95rem; }

.action-row { display: flex; gap: .5rem; flex-wrap: wrap; margin-top: .5rem; }

.chart-embed iframe { width: 100%; height: 520px; border: 0; border-radius: 12px; background: #0b1118; }

.steps { margin: .5rem 0 0; padding-left: 1.25rem; }
.steps li { margin: .5rem 0; }

.socials { display: flex; gap: .75rem; flex-wrap: wrap; }
.social { background: #101a28; border: 1px solid #1b2840; padding: .5rem .75rem; border-radius: 10px; }

.footer { margin: 40px 0 80px; text-align: center; color: #7f94b2; font-size: .9rem; }

.hit .splash { opacity: 1; transform: scale(1.05); }

@media (max-width: 900px) {
  .character { left: calc(50% + 180px); width: 150px; bottom: 220px; }
  .poop { left: calc(50% + 170px); }
}
@media (max-width: 700px) {
  .character { left: calc(50% + 120px); width: 130px; }
  .poop { left: calc(50% + 110px); }
  .toilet { width: 200px; }
}

/* === Patch: ensure windows appear above poop === */
.window, .building-window { position: relative; z-index: 4; }
.poop { z-index: 3; }

/* Bottom-of-page toilet section */
.toilet-bottom-section {
  margin-top: 40vh; /* leave space so user scroll reaches end */
  display: flex;
  justify-content: center;
  padding: 48px 0 80px;
}
.toilet-bottom-section .toilet-wrap { position: relative; }
.toilet-bottom-section .toilet { width: clamp(200px, 28vw, 360px); display: block; }

/* Fixed bottom gold toilet */
.gold-toilet-static { display: flex; justify-content: center; padding: 48px 0; }
.gold-toilet-img { width: clamp(180px, 24vw, 320px); display: block; filter: hue-rotate(25deg) saturate(3.2) brightness(1.15) contrast(1.1); }
/* keep poop above background but below windows if any */
.poop { z-index: 3; }

/* Align toilet horizontally with character */
.toilet-aligned {
  display: block;
  position: relative;
}
.toilet-aligned .gold-toilet-img {
  position: absolute;
  left: calc(50% + 298px); /* match poop's left positioning */
  transform: translateX(-50%);
}

/* Poop behind toilet */
.toilet-aligned {
  z-index: 5; /* above poop */
  position: relative;
}
.poop {
  z-index: 3; /* behind toilet */
  transition: opacity 0.3s ease, transform 0.3s ease;
}

/* Disappear-into-toilet layering */
.toilet-aligned { position: relative; z-index: 5; }
.toilet-aligned .gold-toilet-img { position: absolute; z-index: 5; }
.poop { z-index: 3; transition: opacity .3s ease, transform .25s ease; }

/* Splash image styling */
.toilet-splash {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%) translateY(-50%);
  width: clamp(120px, 18vw, 200px);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  z-index: 6; /* above toilet */
}
.toilet-splash.show {
  opacity: 1;
}

/* Splash animation above toilet */
.toilet-aligned { position: relative; }
.toilet-aligned .splash-img{
  position: absolute;
  left: calc(50% + 248px); /* align with character/poop axis */
  transform: translate(-50%, 0) scale(0.8);
  bottom: 40px; /* rise from bowl */
  opacity: 0;
  pointer-events: none;
  z-index: 6; /* above toilet */
  transition: opacity .25s ease, transform .25s ease;
  width: clamp(120px, 18vw, 220px);
}
.toilet-aligned .splash-show{
  opacity: 1;
  transform: translate(-50%, -10px) scale(1.05);
}

/* Marble floor under toilet */
.marble-floor {
  position: absolute;
  top: 190%;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  height: 250px;
  background: repeating-linear-gradient(
    45deg,
    #e0e0e0,
    #f5f5f5 10px,
    #d9d9d9 20px,
    #f2f2f2 30px
  );
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15), 0 -1px 4px rgba(0,0,0,0.2);
  border-radius: 4px;
  z-index: 4; /* above poop, below splash */
}
